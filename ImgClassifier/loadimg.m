clear ; close all; clc

pkg load image;

filepos = dir('cardpos\');
fileneg = dir('cardneg\');

ivp = size(filepos,1)-2;
ivn = size(fileneg,1)-2;

w=40;
d=40;

tw=320;
td=200;

kw = tw/w;
kd = td/d;

%X = zeros(ivp + ivn,w*d,'uint8');
X1 = zeros(ivp + ivn,w*d,'double');
X2 = zeros(ivp + ivn,w*d,'double');
X3 = zeros(ivp + ivn,w*d,'double');
X4 = zeros(ivp + ivn,w*d,'double');
X5 = zeros(ivp + ivn,w*d,'double');
X6 = zeros(ivp + ivn,w*d,'double');
X7 = zeros(ivp + ivn,w*d,'double');
X8 = zeros(ivp + ivn,w*d,'double');
X9 = zeros(ivp + ivn,w*d,'double');
X10 = zeros(ivp + ivn,w*d,'double');
X11 = zeros(ivp + ivn,w*d,'double');
X12 = zeros(ivp + ivn,w*d,'double');
X13 = zeros(ivp + ivn,w*d,'double');
X14 = zeros(ivp + ivn,w*d,'double');
X15 = zeros(ivp + ivn,w*d,'double');
X16 = zeros(ivp + ivn,w*d,'double');
X17= zeros(ivp + ivn,w*d,'double');
X18 = zeros(ivp + ivn,w*d,'double');
X19 = zeros(ivp + ivn,w*d,'double');
X20 = zeros(ivp + ivn,w*d,'double');
X21 = zeros(ivp + ivn,w*d,'double');
X22 = zeros(ivp + ivn,w*d,'double');
X23 = zeros(ivp + ivn,w*d,'double');
X24 = zeros(ivp + ivn,w*d,'double');
X25 = zeros(ivp + ivn,w*d,'double');
X26 = zeros(ivp + ivn,w*d,'double');
X27 = zeros(ivp + ivn,w*d,'double');
X28 = zeros(ivp + ivn,w*d,'double');
X29 = zeros(ivp + ivn,w*d,'double');
X30 = zeros(ivp + ivn,w*d,'double');
X31 = zeros(ivp + ivn,w*d,'double');
X32 = zeros(ivp + ivn,w*d,'double');
X33 = zeros(ivp + ivn,w*d,'double');
X34 = zeros(ivp + ivn,w*d,'double');
X35 = zeros(ivp + ivn,w*d,'double');
X36 = zeros(ivp + ivn,w*d,'double');
X37 = zeros(ivp + ivn,w*d,'double');
X38 = zeros(ivp + ivn,w*d,'double');
X39 = zeros(ivp + ivn,w*d,'double');
X40 = zeros(ivp + ivn,w*d,'double');
fprintf('start load img...\n');

for n=3:(ivp+2)
  tmp = rgb2gray(imread(['cardpos\',filepos(n).name]));
  if size(tmp,1) > size(tmp,2)
    tmp = tmp';
  end;
  tmpre = imresize(tmp,[td,tw]);
  tmp1 = tmpre(1:d,1:w);
  tmp2 = tmpre(1:d,(w+1):2*w);
  tmp3 = tmpre(1:d,(2*w+1):3*w);
  tmp4 = tmpre(1:d,(3*w+1):4*w);
  tmp5 = tmpre(1:d,(4*w+1):5*w);
  tmp6 = tmpre(1:d,(5*w+1):6*w);
  tmp7 = tmpre(1:d,(6*w+1):7*w);
  tmp8 = tmpre(1:d,(7*w+1):8*w);
  tmp9 = tmpre((d+1):2*d,1:w);
  tmp10 = tmpre((d+1):2*d,(w+1):2*w);
  tmp11 = tmpre((d+1):2*d,(2*w+1):3*w);
  tmp12 = tmpre((d+1):2*d,(3*w+1):4*w);
  tmp13 = tmpre((d+1):2*d,(4*w+1):5*w);
  tmp14 = tmpre((d+1):2*d,(5*w+1):6*w);
  tmp15 = tmpre((d+1):2*d,(6*w+1):7*w);
  tmp16 = tmpre((d+1):2*d,(7*w+1):8*w);
  tmp17 = tmpre((2*d+1):3*d,1:w);
  tmp18 = tmpre((2*d+1):3*d,(w+1):2*w);
  tmp19 = tmpre((2*d+1):3*d,(2*w+1):3*w);
  tmp20 = tmpre((2*d+1):3*d,(3*w+1):4*w);
  tmp21 = tmpre((2*d+1):3*d,(4*w+1):5*w);
  tmp22 = tmpre((2*d+1):3*d,(5*w+1):6*w);
  tmp23 = tmpre((2*d+1):3*d,(6*w+1):7*w);
  tmp24 = tmpre((2*d+1):3*d,(7*w+1):8*w);
  tmp25 = tmpre((3*d+1):4*d,1:w);
  tmp26 = tmpre((3*d+1):4*d,(w+1):2*w);
  tmp27 = tmpre((3*d+1):4*d,(2*w+1):3*w);
  tmp28 = tmpre((3*d+1):4*d,(3*w+1):4*w);
  tmp29 = tmpre((3*d+1):4*d,(4*w+1):5*w);
  tmp30 = tmpre((3*d+1):4*d,(5*w+1):6*w);
  tmp31 = tmpre((3*d+1):4*d,(6*w+1):7*w);
  tmp32 = tmpre((3*d+1):4*d,(7*w+1):8*w);
  tmp33 = tmpre((4*d+1):5*d,1:w);
  tmp34 = tmpre((4*d+1):5*d,(w+1):2*w);
  tmp35 = tmpre((4*d+1):5*d,(2*w+1):3*w);
  tmp36 = tmpre((4*d+1):5*d,(3*w+1):4*w);
  tmp37 = tmpre((4*d+1):5*d,(4*w+1):5*w);
  tmp38 = tmpre((4*d+1):5*d,(5*w+1):6*w);
  tmp39 = tmpre((4*d+1):5*d,(6*w+1):7*w);
  tmp40 = tmpre((4*d+1):5*d,(7*w+1):8*w);
  
  tmp1 = tmp1(:);
  tmp2 = tmp2(:);
  tmp3 = tmp3(:);
  tmp4 = tmp4(:);
  tmp5 = tmp5(:);
  tmp6 = tmp6(:);
  tmp7 = tmp7(:);
  tmp8 = tmp8(:);
  tmp9 = tmp9(:);
  tmp10 = tmp10(:);
  tmp11 = tmp11(:);
  tmp12 = tmp12(:);
  tmp13 = tmp13(:);
  tmp14 = tmp14(:);
  tmp15 = tmp15(:);
  tmp16 = tmp16(:);
  tmp17 = tmp17(:);
  tmp18 = tmp18(:);
  tmp19 = tmp19(:);
  tmp20 = tmp20(:);
  tmp21 = tmp21(:);
  tmp22 = tmp22(:);
  tmp23 = tmp23(:);
  tmp24 = tmp24(:);
  tmp25 = tmp25(:);
  tmp26 = tmp26(:);
  tmp27 = tmp27(:);
  tmp28 = tmp28(:);
  tmp29 = tmp29(:);
  tmp30 = tmp30(:);
  tmp31 = tmp31(:);
  tmp32 = tmp32(:);
  tmp33 = tmp33(:);
  tmp34 = tmp34(:);
  tmp35 = tmp35(:);
  tmp36 = tmp36(:);
  tmp37 = tmp37(:);
  tmp38 = tmp38(:);
  tmp39 = tmp39(:);
  tmp40 = tmp40(:);
  
  X1(n-2,:) = tmp1';
  X2(n-2,:)  = tmp2';
  X3(n-2,:)  = tmp3';
  X4(n-2,:)  = tmp4';
  X5(n-2,:)  = tmp5';
  X6(n-2,:)  = tmp6';
  X7(n-2,:)  = tmp7';
  X8(n-2,:)  = tmp8';
  X9(n-2,:)  = tmp9';
  X10(n-2,:)  = tmp10';
  X11(n-2,:)  = tmp11';
  X12(n-2,:)  = tmp12';
  X13(n-2,:)  = tmp13';
  X14(n-2,:)  = tmp14';
  X15(n-2,:)  = tmp15';
  X16(n-2,:)  = tmp16';
  X17(n-2,:) = tmp17';
  X18(n-2,:)  = tmp18';
  X19(n-2,:)  = tmp19';
  X20(n-2,:)  = tmp20';
  X21(n-2,:)  = tmp21';
  X22(n-2,:)  = tmp22';
  X23(n-2,:)  = tmp23';
  X24(n-2,:)  = tmp24';
  X25(n-2,:) = tmp25';
  X26(n-2,:)  = tmp26';
  X27(n-2,:)  = tmp27';
  X28(n-2,:)  = tmp28';
  X29(n-2,:)  = tmp29';
  X30(n-2,:)  = tmp30';
  X31(n-2,:)  = tmp31';
  X32(n-2,:)  = tmp32';
  X33(n-2,:)  = tmp33';
  X34(n-2,:)  = tmp34';
  X35(n-2,:)  = tmp35';
  X36(n-2,:)  = tmp36';
  X37(n-2,:) = tmp37';
  X38(n-2,:)  = tmp38';
  X39(n-2,:)  = tmp39';
  X40(n-2,:)  = tmp40';
  %tmpped = processimg(w,d,tmp);
  %Xuse(n-2,:) = tmpped';
  
end;

for n=3:(ivn+2)
  tmp = rgb2gray(imread(['cardneg\',fileneg(n).name]));
  if size(tmp,1) > size(tmp,2)
    tmp = tmp';
  end;
  tmpre = imresize(tmp,[td,tw]);
  tmp1 = tmpre(1:d,1:w);
  tmp2 = tmpre(1:d,(w+1):2*w);
  tmp3 = tmpre(1:d,(2*w+1):3*w);
  tmp4 = tmpre(1:d,(3*w+1):4*w);
  tmp5 = tmpre(1:d,(4*w+1):5*w);
  tmp6 = tmpre(1:d,(5*w+1):6*w);
  tmp7 = tmpre(1:d,(6*w+1):7*w);
  tmp8 = tmpre(1:d,(7*w+1):8*w);
  tmp9 = tmpre((d+1):2*d,1:w);
  tmp10 = tmpre((d+1):2*d,(w+1):2*w);
  tmp11 = tmpre((d+1):2*d,(2*w+1):3*w);
  tmp12 = tmpre((d+1):2*d,(3*w+1):4*w);
  tmp13 = tmpre((d+1):2*d,(4*w+1):5*w);
  tmp14 = tmpre((d+1):2*d,(5*w+1):6*w);
  tmp15 = tmpre((d+1):2*d,(6*w+1):7*w);
  tmp16 = tmpre((d+1):2*d,(7*w+1):8*w);
  tmp17 = tmpre((2*d+1):3*d,1:w);
  tmp18 = tmpre((2*d+1):3*d,(w+1):2*w);
  tmp19 = tmpre((2*d+1):3*d,(2*w+1):3*w);
  tmp20 = tmpre((2*d+1):3*d,(3*w+1):4*w);
  tmp21 = tmpre((2*d+1):3*d,(4*w+1):5*w);
  tmp22 = tmpre((2*d+1):3*d,(5*w+1):6*w);
  tmp23 = tmpre((2*d+1):3*d,(6*w+1):7*w);
  tmp24 = tmpre((2*d+1):3*d,(7*w+1):8*w);
  tmp25 = tmpre((3*d+1):4*d,1:w);
  tmp26 = tmpre((3*d+1):4*d,(w+1):2*w);
  tmp27 = tmpre((3*d+1):4*d,(2*w+1):3*w);
  tmp28 = tmpre((3*d+1):4*d,(3*w+1):4*w);
  tmp29 = tmpre((3*d+1):4*d,(4*w+1):5*w);
  tmp30 = tmpre((3*d+1):4*d,(5*w+1):6*w);
  tmp31 = tmpre((3*d+1):4*d,(6*w+1):7*w);
  tmp32 = tmpre((3*d+1):4*d,(7*w+1):8*w);
  tmp33 = tmpre((4*d+1):5*d,1:w);
  tmp34 = tmpre((4*d+1):5*d,(w+1):2*w);
  tmp35 = tmpre((4*d+1):5*d,(2*w+1):3*w);
  tmp36 = tmpre((4*d+1):5*d,(3*w+1):4*w);
  tmp37 = tmpre((4*d+1):5*d,(4*w+1):5*w);
  tmp38 = tmpre((4*d+1):5*d,(5*w+1):6*w);
  tmp39 = tmpre((4*d+1):5*d,(6*w+1):7*w);
  tmp40 = tmpre((4*d+1):5*d,(7*w+1):8*w);
  
  tmp1 = tmp1(:);
  tmp2 = tmp2(:);
  tmp3 = tmp3(:);
  tmp4 = tmp4(:);
  tmp5 = tmp5(:);
  tmp6 = tmp6(:);
  tmp7 = tmp7(:);
  tmp8 = tmp8(:);
  tmp9 = tmp9(:);
  tmp10 = tmp10(:);
  tmp11 = tmp11(:);
  tmp12 = tmp12(:);
  tmp13 = tmp13(:);
  tmp14 = tmp14(:);
  tmp15 = tmp15(:);
  tmp16 = tmp16(:);
  tmp17 = tmp17(:);
  tmp18 = tmp18(:);
  tmp19 = tmp19(:);
  tmp20 = tmp20(:);
  tmp21 = tmp21(:);
  tmp22 = tmp22(:);
  tmp23 = tmp23(:);
  tmp24 = tmp24(:);
  tmp25 = tmp25(:);
  tmp26 = tmp26(:);
  tmp27 = tmp27(:);
  tmp28 = tmp28(:);
  tmp29 = tmp29(:);
  tmp30 = tmp30(:);
  tmp31 = tmp31(:);
  tmp32 = tmp32(:);
  tmp33 = tmp33(:);
  tmp34 = tmp34(:);
  tmp35 = tmp35(:);
  tmp36 = tmp36(:);
  tmp37 = tmp37(:);
  tmp38 = tmp38(:);
  tmp39 = tmp39(:);
  tmp40 = tmp40(:);
  
  X1(n-2+ivp,:) = tmp1';
  X2(n-2+ivp,:)  = tmp2';
  X3(n-2+ivp,:)  = tmp3';
  X4(n-2+ivp,:)  = tmp4';
  X5(n-2+ivp,:)  = tmp5';
  X6(n-2+ivp,:)  = tmp6';
  X7(n-2+ivp,:)  = tmp7';
  X8(n-2+ivp,:)  = tmp8';
  X9(n-2+ivp,:) = tmp9';
  X10(n-2+ivp,:)  = tmp10';
  X11(n-2+ivp,:)  = tmp11';
  X12(n-2+ivp,:)  = tmp12';
  X13(n-2+ivp,:)  = tmp13';
  X14(n-2+ivp,:)  = tmp14';
  X15(n-2+ivp,:)  = tmp15';
  X16(n-2+ivp,:)  = tmp16';
  X17(n-2+ivp,:) = tmp17';
  X18(n-2+ivp,:)  = tmp18';
  X19(n-2+ivp,:)  = tmp19';
  X20(n-2+ivp,:)  = tmp20';
  X21(n-2+ivp,:)  = tmp21';
  X22(n-2+ivp,:)  = tmp22';
  X23(n-2+ivp,:)  = tmp23';
  X24(n-2+ivp,:)  = tmp24';
  X25(n-2+ivp,:) = tmp25';
  X26(n-2+ivp,:)  = tmp26';
  X27(n-2+ivp,:)  = tmp27';
  X28(n-2+ivp,:)  = tmp28';
  X29(n-2+ivp,:)  = tmp29';
  X30(n-2+ivp,:)  = tmp30';
  X31(n-2+ivp,:)  = tmp31';
  X32(n-2+ivp,:)  = tmp32';
  X33(n-2+ivp,:)  = tmp33';
  X34(n-2+ivp,:) = tmp34';
  X35(n-2+ivp,:)  = tmp35';
  X36(n-2+ivp,:)  = tmp36';
  X37(n-2+ivp,:) = tmp37';
  X38(n-2+ivp,:)  = tmp38';
  X39(n-2+ivp,:)  = tmp39';
  X40(n-2+ivp,:)  = tmp40';
  
  %tmpped = processimg(w,d,tmp);
  %Xuse(n+ivp-2,:) = tmpped';
end;

y=zeros(ivp + ivn,1,'double');

for n=1:ivp
  y(n,:)=1;
end;

fprintf('load success...\n');
pause;